<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">

<head>
	<meta charset="UTF-8">
	<title>스티커 출력</title>

	<!-- ✅ FontAwesome 무료 CDN (cdnjs) -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
		referrerpolicy="no-referrer" />
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link
		href="https://fonts.googleapis.com/css2?family=Hi+Melody&family=Noto+Sans+KR:wght@100..900&family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Noto+Serif+JP:wght@200..900&display=swap"
		rel="stylesheet">

	<style>
		:root {
			--page-mt: 6mm;
			--page-mr: 6mm;
			--page-mb: 6mm;
			--page-ml: 6mm;

			--label-pad: 5mm;
			--divider: 1px dashed #b8b8b8;

			--font-base: 12pt;
			--font-small: 11pt;

			--line: 1.28;
			--line-tight: 1.18;

			--weight-strong: 800;
			--weight-key: 800;

			--logo-w: 44mm;
			--logo-h: auto;

			--kv-push-down: 50px;
			--kv-row-gap: 2.6mm;
		}

		@page {
			size: A4 portrait;
			margin: var(--page-mt) var(--page-mr) var(--page-mb) var(--page-ml);
		}

		* {
			font-family: "Noto Sans KR", sans-serif;
		}

		html, body {
			margin: 0;
			padding: 0;
			font-family: "Noto Sans KR", sans-serif;
			font-size: var(--font-base);
			line-height: var(--line);
			color: #111;
			-webkit-print-color-adjust: exact;
			print-color-adjust: exact;
		}

		.sheet {
			width: calc(210mm - (var(--page-ml) + var(--page-mr)));
			height: calc(297mm - (var(--page-mt) + var(--page-mb)));
			box-sizing: border-box;

			display: grid;
			grid-template-columns: 1fr 1fr;
			grid-template-rows: 1fr 1fr;

			border: var(--divider);
			page-break-after: always;
		}

		.label {
			box-sizing: border-box;
			padding: var(--label-pad);
			overflow: hidden;
			position: relative;

			display: flex;
			flex-direction: column;

			border-right: var(--divider);
			border-bottom: var(--divider);
		}

		.sheet > .label:nth-child(2n) {
			border-right: none;
		}

		.sheet > .label:nth-child(n+3) {
			border-bottom: none;
		}

		.label-top {
			flex: 0 0 50%;
			min-height: 50%;
			display: flex;
			flex-direction: column;
			gap: 2.8mm;
		}

		.label-bottom {
			flex: 0 0 50%;
			min-height: 50%;
			padding-top: 3mm;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.logo-row {
			display: flex;
			justify-content: space-between;
			align-items: flex-start;
			gap: 6mm;
		}

		.logo-row img {
			width: var(--logo-w);
			height: var(--logo-h);
			object-fit: contain;
			display: block;
		}

		.badge {
			font-size: 9pt;
			font-weight: 400;
			color: #777;
			border: none;
			background: transparent;
			padding: 0;
			white-space: nowrap;
			align-self: flex-start;
		}

		.kv {
			display: grid;
			grid-template-columns: 22mm 1fr;
			column-gap: 3.5mm;
			row-gap: var(--kv-row-gap);

			margin-top: var(--kv-push-down);
			align-items: start;
		}

		.k {
			font-size: var(--font-small);
			font-weight: var(--weight-key);
			white-space: nowrap;
			color: #111;
			display: flex;
			align-items: center;
		}

		.k::before {
			content: none;
		}

		/* ✅ 아이콘만 약하게 */
		.k i {
			margin-right: 1.6mm;
			color: #666;
			font-size: 8pt;
			line-height: 1;
		}

		.v {
			font-size: var(--font-small);
			color: #111;
			word-break: keep-all;
			overflow-wrap: anywhere;
		}

		.v.tight {
			line-height: var(--line-tight);
		}

		.strong {
			font-weight: var(--weight-strong);
		}

		.opt-inline {
			display: flex;
			flex-wrap: wrap;
			gap: 2mm 3.2mm;
		}

		.opt-chip {
			border: 1px solid #bbb;
			border-radius: 2.5mm;
			padding: 0.8mm 2.3mm;
			font-size: var(--font-small);
			color: #222;
			white-space: nowrap;
		}

		.admin-image {
			width: 100%;
			height: 100%;
			max-height: 100%;
			object-fit: contain;
			display: block;
		}

		.no-image {
			font-size: 11pt;
			font-weight: 800;
			color: #777;
			border: 1px dashed #bbb;
			border-radius: 3mm;
			padding: 4mm 6mm;
			text-align: center;
			width: 100%;
		}

		.today {
			position: absolute;
			right: 4mm;
			bottom: 3.2mm;
			font-size: 8pt;
			font-weight: 400;
			color: #777;
			background: transparent;
			border: none;
			padding: 0;
			white-space: nowrap;
		}

		.label.empty {
			color: transparent;
		}

		@media screen {
			body {
				background: #f2f2f2;
				padding: 10px;
			}

			.sheet {
				background: #fff;
				margin: 0 auto 14px;
				box-shadow: 0 2px 10px rgba(0, 0, 0, .08);
			}
		}

		@media print {
			a {
				text-decoration: none;
				color: inherit;
			}
		}
	</style>
</head>

<body>

	<div th:if="${totalCount == 0}" style="padding: 20px;">
		출력할 항목이 없습니다.
	</div>

	<div th:each="pageItems, pStat : ${pages}" class="sheet">

		<!-- ✅ 2×2 = 4개 -->
		<div th:each="item, iStat : ${pageItems}" class="label">

			<!-- ✅ 우측 하단 오늘 날짜 -->
			<div class="today" th:text="${#temporals.format(today, 'yyyy/MM/dd')}">2026/02/06</div>

			<!-- =========================
           상단(정보) 50%
           ========================= -->
			<div class="label-top">

				<!-- 로고(좌측) + 규격/비규격(우측) -->
				<div class="logo-row">
					<img th:src="@{/administration/assets/logo/logo_black.png}" alt="logo" />
					<div class="badge" th:text="${item.standard ? '규격' : '비규격'}">비규격</div>
				</div>

				<!-- 출력 항목 (KV) -->
				<div class="kv">

					<div class="k"><i class="fa-solid fa-store"></i>대리점</div>
					<div class="v strong" th:text="${item.companyName}">-</div>

					<div class="k"><i class="fa-solid fa-tag"></i>모델명</div>
					<div class="v strong" th:text="${item.modelName}">-</div>

					<!-- ✅✅ 규격이면 제품코드 출력 -->
					<th:block th:if="${item.standard and item.productCode != null and item.productCode != ''}">
						<div class="k"><i class="fa-solid fa-barcode"></i>제품코드</div>
						<div class="v strong" th:text="${item.productCode}">-</div>
					</th:block>

					<div class="k"><i class="fa-solid fa-palette"></i>색상</div>
					<div class="v" th:text="${item.colorDisplay}">-</div>

					<div class="k"><i class="fa-solid fa-ruler-combined"></i>사이즈</div>
					<div class="v tight" th:text="${item.size}">-</div>

					<!-- 옵션여부: 있을 때만 -->
					<th:block th:if="${item.optionFlags != null and !item.optionFlags.isEmpty()}">
						<div class="k"><i class="fa-solid fa-sliders"></i>옵션여부</div>
						<div class="v">
							<div class="opt-inline">
								<span class="opt-chip" th:each="opt : ${item.optionFlags}" th:text="${opt}">옵션</span>
							</div>
						</div>
					</th:block>

					<div class="k"><i class="fa-solid fa-note-sticky"></i>비고</div>
					<div class="v tight"
						th:text="${item.adminMemo != null and item.adminMemo != '' ? item.adminMemo : '-'}">-</div>

				</div>
			</div>

			<!-- =========================
           하단(이미지) 50%
           ========================= -->
			<div class="label-bottom">
				<div th:if="${item.adminImageUrl != null and item.adminImageUrl != ''}"
					style="width:100%; height:100%;">
					<img class="admin-image" th:src="${item.adminImageUrl}" alt="admin image" />
				</div>
				<div th:if="${item.adminImageUrl == null or item.adminImageUrl == ''}" class="no-image">
					추가 이미지 없음
				</div>
			</div>

		</div>

		<!-- ✅ 마지막 페이지 4칸 미만이면 채움 -->
		<div th:if="${pageItems.size() < 4}" th:each="x : ${#numbers.sequence(1, 4 - pageItems.size())}"
			class="label empty">
			<div>.</div>
		</div>

	</div>

	<script>
		window.addEventListener('load', function () {
			window.print();
			// window.onafterprint = function(){ window.close(); };
		});
	</script>

</body>

</html>
