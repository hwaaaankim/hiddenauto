<!DOCTYPE HTML>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="fragments/front/common :: autoHead">
</head>

<body class="theme-light" data-highlight="highlight-red" data-gradient="body-default">


	<th:block th:replace="fragments/front/common :: autoLoader"></th:block>
	<th:block th:replace="fragments/front/common :: autoFooterMenu"></th:block>

	<div id="page" class="container">
		<th:block th:replace="fragments/front/common :: autoHeaderMenu"></th:block>
		<div class="page-content header-clear-medium">
			<div class="card card-style preload-img" data-src="/front/images/pictures/18.jpg" data-card-height="130">
				<div class="card-center ms-3">
					<h1 class="color-white mb-0">규격제품발주</h1>
					<p class="color-white mt-n1 mb-0">사이트 내에 존재하는 데이터를 통한 검색을 지원합니다.</p>
				</div>
				<div class="card-center me-3">
					<a href="/index" data-back-button
						class="btn btn-m float-end rounded-xl shadow-xl text-uppercase font-800 bg-highlight">홈</a>
				</div>
				<div class="card-overlay bg-black opacity-80"></div>
			</div>
			<div class="card card-style" style="height:100vh;">
				<div id="selected-items">
					<h3>선택한 항목: <span id="selected-path">None</span></h3>
				</div>

				<div class="chat-container" id="chat-container">
					<!-- 챗봇 대화 영역 -->
					<div class="chat-box" id="chat-box">
						<div class="chat-message">대분류를 선택하세요:</div>
						<div class="chat-options" id="category-options">
							<div class="option" onclick="selectCategory('하부장')">하부장</div>
							<div class="option" onclick="selectCategory('상부장')">상부장</div>
							<div class="option" onclick="selectCategory('슬라이드장')">슬라이드장</div>
							<div class="option" onclick="selectCategory('거울')">거울</div>
							<div class="option" onclick="selectCategory('플랩장')">플랩장</div>
							<div class="option" onclick="selectCategory('기타')">기타</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<th:block th:replace="fragments/front/common :: autoBottomMenu"></th:block>
	</div>
	<th:block th:replace="fragments/front/common :: autoSideBar"></th:block>
	<th:block th:replace="fragments/front/common :: autoScript"></th:block>
	<script>
		let selectedCategory = '';
		let selectedProduct = '';
		let selectedSize = '';

		function updateSelectedItems() {
			const selectedPath = `${selectedCategory} - ${selectedProduct} - ${selectedSize}`;
			document.getElementById('selected-path').innerText = selectedPath !== ' -  - ' ? selectedPath : 'None';
		}

		function addChatMessage(message, options = null) {
			const chatBox = document.getElementById('chat-box');
			const newMessage = document.createElement('div');
			newMessage.classList.add('chat-message');
			newMessage.innerText = message;
			chatBox.appendChild(newMessage);

			if (options) {
				const optionsContainer = document.createElement('div');
				optionsContainer.classList.add('chat-options');
				options.forEach(option => {
					const optionDiv = document.createElement('div');
					optionDiv.classList.add('option');
					optionDiv.innerText = option.label;
					optionDiv.onclick = option.action;
					optionsContainer.appendChild(optionDiv);
				});
				chatBox.appendChild(optionsContainer);
			}

			document.getElementById('chat-container').scrollTop = chatBox.scrollHeight;
		}

		function selectCategory(category) {
			selectedCategory = category;
			updateSelectedItems();
			addChatMessage(`'${category}' 대분류 선택하셨습니다.`);
			addChatMessage('제품을 선택하세요:', [
				{label: 'PRODUCT01', action: () => selectProduct('PRODUCT01')},
				{label: 'PRODUCT02', action: () => selectProduct('PRODUCT02')},
				{label: 'PRODUCT03', action: () => selectProduct('PRODUCT03')},
				{label: 'PRODUCT04', action: () => selectProduct('PRODUCT04')},
				{label: 'PRODUCT05', action: () => selectProduct('PRODUCT05')},
				{label: 'PRODUCT06', action: () => selectProduct('PRODUCT06')}
			]);

			// 선택 후 기존 옵션 숨기기
			document.getElementById('category-options').style.display = 'none';
		}

		function selectProduct(product) {
			selectedProduct = product;
			updateSelectedItems();
			addChatMessage(`'${product}' 제품을 선택하셨습니다.`);
			addChatMessage('사이즈를 선택하세요:', [
				{label: 'SIZE01', action: () => selectSize('SIZE01')},
				{label: 'SIZE02', action: () => selectSize('SIZE02')},
				{label: 'SIZE03', action: () => selectSize('SIZE03')},
				{label: 'SIZE04', action: () => selectSize('SIZE04')},
				{label: 'SIZE05', action: () => selectSize('SIZE05')},
				{label: 'SIZE06', action: () => selectSize('SIZE06')}
			]);
		}

		function selectSize(size) {
			selectedSize = size;
			updateSelectedItems();
			addChatMessage(`'${size}' 사이즈를 선택하셨습니다.`);
			addChatMessage('선택이 완료되었습니다. 다음 단계를 진행해주세요.');
		}
	</script>
</body>